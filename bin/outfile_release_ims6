#!/bin/sh

resultLog=""

target_ims_ver=6
target_architecture="" # empty=32bit, 64=64bit
release_folder="$HOME/outfiles"

libims=$ANDROID_PRODUCT_OUT/system/lib$target_architecture/libims.so
imsApk=$ANDROID_PRODUCT_OUT/system/priv-app/Ims$target_ims_ver/Ims$target_ims_ver.apk
libimsmmpf=$ANDROID_PRODUCT_OUT/system/lib$target_architecture/libimsmmpf.so
libimsrcsmedia=$ANDROID_PRODUCT_OUT/system/lib$target_architecture/libimsrcsmedia.so
libimsvtjni=$ANDROID_PRODUCT_OUT/system/lib$target_architecture/libimsvtjni.so
libimswms=$ANDROID_PRODUCT_OUT/system/lib$target_architecture/libimswms.so
libvss_ims_qcci=$ANDROID_PRODUCT_OUT/system/lib$target_architecture/libvss_ims_qcci.so
RCSProviderApk=$ANDROID_PRODUCT_OUT/system/priv-app/RCSProvider/RCSProvider.apk

copyToOutfolder() {
    if [[ ! -e "$1" ]];then
        echo "Error. $1 does not exist"
    else
        cp -r $1 $release_folder/
        resultLog+="> $1 ====> to $release_folder/\n"
    fi
}

if [ -z $ANDROID_PRODUCT_OUT ];then
    echo "ANDROID_PRODUCT_OUT is null"
    exit 1;
else
echo -e "\n---- Result : Copy files ----"
    echo -e "\$ANDROID_PRODUCT_OUT = $ANDROID_PRODUCT_OUT \n"
fi

if [[ ! -e "$ANDROID_PRODUCT_OUT/symbols/system/lib/libims.so" ]];then
    echo "(Symbol) symbols/system/lib/libims.so does not exist"
else
    cp -r $ANDROID_PRODUCT_OUT/symbols/system/lib$target_architecture/libims.so $release_folder/symbol/
    resultLog+="> (Symbol) \"symbols/system/lib$target_architecture/libims.so\" ====> to $release_folder/symbol/\n"
fi

copyToOutfolder $libims
copyToOutfolder $imsApk
copyToOutfolder $libimsmmpf
copyToOutfolder $libimsrcsmedia
copyToOutfolder $libimsvtjni
copyToOutfolder $libimswms
copyToOutfolder $libvss_ims_qcci
copyToOutfolder $RCSProviderApk

echo -e "$resultLog"
